---
title: 手机是如何实现自动对焦
date: 2018-02-09 14:11:55
tags: 
- 相机
- 飞控
categories: 
- 无人机
- 拍照 
---

#### 一、话不多说，我们首先来看看相机聚焦的原理是什么？然后再让它自动

这个图我们都熟悉，中学时候的凸透镜成像的原理

![](https://sweetm-1256061026.cos.ap-beijing.myqcloud.com/2018-02%E6%89%8B%E6%9C%BA%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%AF%B9%E7%84%A6/3a8c64b527ef2e18228263478e543232_hd.jpg)


要保证xx’=ff‘，这样才能得到清晰的像，可以发现物距x跟像距x’具有共轭关系，当物距x变化时，要么调节焦距f，要门调节像距x’，才能在相机上得到我们清晰的像

---
#### 二、接着我们来了解下什么是景深？通俗来讲就是相机（底片）上，成清晰像的范围

其实对于最简单的照相机（一块凸透镜）来说，唯一的一个物距仅对应一个像距，所以景深为0，偏离一点点都会不清晰。但是为什么我们的照相机拍出来的不光是一个面上是清晰的呢？因为我们的照相机跟人眼一样，它的景深可以做到趋近无限远（注意趋近）∞。两者的应用情况不同，对于工业定位而言，精度要达到微米级别，所以景深要做到尽可能小；对于我们民用的照相机而言，重点是景色，全景，拍一个面肯定就不行了啊
下面三图是智能手机拍的照片：第一幅是在一定距离，我点击屏幕，让它对焦“杭州”，接着向上平移，没有再点击屏幕使其对焦，发现杭州俩字变模糊了，这时候的情况是焦距、像距均无变化，仅物距变化，显然就会造成模糊（但是不至于很模糊，还记的我们之前说的趋近于无限远的景深吗？如果无限远了，就一样清晰了，但是实际情况做不到，只能趋近），那我怎样让成像清晰呢？1、改变物距，所以图3我把一支笔上移了一段举例，可以看到笔身的字体还是蛮清晰的2、点击屏幕，重新聚焦，这时候改变的就是焦距跟像距了


![](https://sweetm-1256061026.cos.ap-beijing.myqcloud.com/2018-02%E6%89%8B%E6%9C%BA%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%AF%B9%E7%84%A6/3ed0554cadf8a99b1bb170dfcac30431_hd.jpg)

![](https://sweetm-1256061026.cos.ap-beijing.myqcloud.com/2018-02%E6%89%8B%E6%9C%BA%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%AF%B9%E7%84%A6/68a13cacd3629d846c37aef22a4d3e4c_hd.jpg)

![](https://sweetm-1256061026.cos.ap-beijing.myqcloud.com/2018-02%E6%89%8B%E6%9C%BA%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%AF%B9%E7%84%A6/0ce757a382bb890fb6d784221a8e1b7d_hd.jpg)


#### 三、那相机怎样像人一样判断，是否聚焦了呢？这里就用到了图像清晰度评价算法，常用的有这么几种：

![](https://sweetm-1256061026.cos.ap-beijing.myqcloud.com/2018-02%E6%89%8B%E6%9C%BA%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%AF%B9%E7%84%A6/ca9f4d3e0eeda987b82d7a6f8fd09e29_hd.jpg)

频域分析法和统计学函数由于对抗噪声能力弱，算法复杂，应用较少，现有应用主要是上面的灰度梯度类算法及其改进算法
![](https://sweetm-1256061026.cos.ap-beijing.myqcloud.com/2018-02%E6%89%8B%E6%9C%BA%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%AF%B9%E7%84%A6/36bc92428c5989c51fe8d3f851a4e77f_hd.jpg)
具体的学术算法就不讲了，巴拉巴拉…得出结论是有那么几种算法，时间、准确性上都非常好
![](https://sweetm-1256061026.cos.ap-beijing.myqcloud.com/2018-02%E6%89%8B%E6%9C%BA%E6%98%AF%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%AF%B9%E7%84%A6/ce6c044417aa65687bde45aac38dcb65_hd.jpg)
#### 四、但是峰值位置怎么来求呢？一种是遍历法，就是每一点的图片清晰度值都计算出来，最后找到最大值，但这种算法未免太过浪费时间，效率低下，还有一种算法是爬山算法，基本原理是，先粗调，再精调，最终高效的找到图像清晰度最大的点（峰值）。找到后驱动电机运转一定角度，实现像距或者焦距的变化，步进到最佳成像位置


#### 五、差不多就是这么多，所以相机自动聚焦时，都会有个从模糊到清晰，到模糊，再到清晰的过程，这就是相机的自动调焦了
---

对之前的知识进行一定补充：介绍两个不同的概念

对焦：对我们的手机来说，对焦仅仅是实现物距跟像距的变化，达到共轭关系，使得成像清晰，而这是通过手机里面的音圈马达实现的，驱动整个镜头组移动来实现。限于手机体积的原因，只能达到这样的水平。

变焦：但是手机摄像头其实是多个棱镜片组成的，比如iPhone6 是由6片塑料棱镜组成的镜头模组，限于手机体积，我们没办法改变棱镜片之间的距离，所以我们改变不了手机的焦距。这也就是我们的手机只能做到数码变焦（其实就是把你拍的照片单纯放大而已，越大，成像会越不清晰），而光学变焦，目前来看，还没有谁成功在手机上运用

原贴地址：知乎




