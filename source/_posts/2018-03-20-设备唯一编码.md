---
layout: android
title: 设备唯一编码
date: 2018-02-26  21:10:11
tags: 
- 唯一编码
categories: 
- Android
---


# Android 设备唯一编码

相信大家也会遇到一些唯一标识android设备的唯一性，但是android的权限越来越高，好多原来的方法不能使用了，整理一些放出来大家一起使用😎
### 1.IMEI 编码获取(平板没有)
``` java
            TelephonyManager tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
            if (ActivityCompat.checkSelfPermission(context, Manifest.permission.READ_PHONE_STATE) == PackageManager.PERMISSION_GRANTED) {
                //平板没有  15个数字
                String imei = tm.getDeviceId();
                if (!TextUtils.isEmpty(imei)) {
                    deviceId.append(imei);
                }
            }
```

### 2.通过Build获取一些信息

``` java
          String manufacturer = Build.MANUFACTURER;
            deviceId.append(manufacturer);
            //WIFI  MAC 地址
            String localMac = getLocalMac(context);
            deviceId.append(localMac);

            String cpuAbi = Build.CPU_ABI;
            deviceId.append(cpuAbi);
            String radioVersion = Build.getRadioVersion();
            deviceId.append(radioVersion);
            String board = Build.BOARD;
            deviceId.append(board);
            String brand = Build.BRAND;
            deviceId.append(brand);
            String device = Build.DEVICE;
            deviceId.append(device);
            String display = Build.DISPLAY;
            deviceId.append(display);
            String hardware = Build.HARDWARE;
            deviceId.append(hardware);
```
#### 参数含义

| 属性名                          | 含义                          |
|---------------------------------|-------------------------------|
| ro.build.version.sdk            | SDK 版本                      |
| ro.build.version.release        | Android 系统版本              |
| ro.build.version.security_patch | Android 安全补丁程序级别      |
| ro.product.model                | 型号                          |
| ro.product.brand                | 品牌                          |
| ro.product.name                 | 设备名                        |
| ro.product.board                | 处理器型号                    |
| ro.product.cpu.abilist          | CPU 支持的 abi 列表[*节注一*] |
| persist.sys.isUsbOtgEnabled     | 是否支持 OTG                  |
| dalvik.vm.heapsize              | 每个应用程序的内存上限        |
| ro.sf.lcd_density               | 屏幕密度                      |


### 3.获取网卡的Mac地址

``` java
   /**
     * 获取设备MAC 地址 由于 6.0 以后 WifiManager 得到的 MacAddress得到都是 相同的没有意义的内容
     * 所以采用以下方法获取Mac地址
     * 需要
     * <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
     * <uses-permission android:name="android.permission.INTERNET"></uses-permission>
     *
     * @param context
     * @return
     */
    private static String getLocalMac(Context context) {
        String macAddress = null;
        StringBuffer buf = new StringBuffer();
        NetworkInterface networkInterface = null;
        try {
            networkInterface = NetworkInterface.getByName("eth1");
            if (networkInterface == null) {
                networkInterface = NetworkInterface.getByName("wlan0");
            }
            if (networkInterface == null) {
                return "";
            }
            byte[] addr = networkInterface.getHardwareAddress();


            for (byte b : addr) {
                buf.append(String.format("%02X:", b));
            }
            if (buf.length() > 0) {
                buf.deleteCharAt(buf.length() - 1);
            }
            macAddress = buf.toString();
        } catch (SocketException e) {
            e.printStackTrace();
            return "";
        }
        return macAddress;
    }
```

### 4.获取蓝牙Mac地址

``` java
    private String getBluetoothMac(final Context context) {

        String result = null;
        if (context.checkCallingOrSelfPermission(Manifest.permission.BLUETOOTH)
                == PackageManager.PERMISSION_GRANTED) {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                // Hardware ID are restricted in Android 6+
                // https://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-hardware-id
                // Getting bluetooth mac via reflection for devices with Android 6+
                result = android.provider.Settings.Secure.getString(context.getContentResolver(),
                        "bluetooth_address");
            } else {
                BluetoothAdapter bta = BluetoothAdapter.getDefaultAdapter();
                result = bta != null ? bta.getAddress() : "";
            }
        }
        return result;
    }
```